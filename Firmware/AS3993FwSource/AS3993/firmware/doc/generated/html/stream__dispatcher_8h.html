<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>as3993 Firmware: stream_dispatcher.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">as3993 Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_d3e01d84417a30ad319070c1f4e344b7.html">firmware</a></li><li class="navelem"><a class="el" href="dir_f2eb04dc0cf048ef1052bb62b9646e92.html">microchip</a></li><li class="navelem"><a class="el" href="dir_5054a1badb8e92b7482a308b8c9af2ec.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stream_dispatcher.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;ams_types.h&quot;</code><br/>
<code>#include &quot;stream_driver.h&quot;</code><br/>
</div>
<p><a href="stream__dispatcher_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab1ebe0715d47303b0285e58b4f6848b7"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#ab1ebe0715d47303b0285e58b4f6848b7">applPeripheralReset</a> ()</td></tr>
<tr class="separator:ab1ebe0715d47303b0285e58b4f6848b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4a0c0c1831c4471214426e778a3975"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#a4a4a0c0c1831c4471214426e778a3975">applFirmwareInformation</a> ()</td></tr>
<tr class="separator:a4a4a0c0c1831c4471214426e778a3975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643fb80b755c5bad7a12aeea04ad0861"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#a643fb80b755c5bad7a12aeea04ad0861">applProcessCmd</a> (u8 protocol, u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:a643fb80b755c5bad7a12aeea04ad0861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf04107999e6e405925ceddfbb4a6edf"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#abf04107999e6e405925ceddfbb4a6edf">applProcessCyclic</a> (u8 *protocol, u16 *txSize, u8 *txData, u16 remainingSize)</td></tr>
<tr class="separator:abf04107999e6e405925ceddfbb4a6edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c9c1398d4b415a6ae75399f8bfd247"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#ad4c9c1398d4b415a6ae75399f8bfd247">applReadReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:ad4c9c1398d4b415a6ae75399f8bfd247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca11ee1372a8dfefb8c2f93a35062be6"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#aca11ee1372a8dfefb8c2f93a35062be6">applWriteReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:aca11ee1372a8dfefb8c2f93a35062be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0fe4497f92844f50bd567b8b5ca52755"><td class="memItemLeft" align="right" valign="top">const u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stream__dispatcher_8h.html#a0fe4497f92844f50bd567b8b5ca52755">firmwareNumber</a></td></tr>
<tr class="separator:a0fe4497f92844f50bd567b8b5ca52755"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for stream packet handling. </p>
<dl class="section author"><dt>Author</dt><dd>M. Arpa </dd></dl>

<p>Definition in file <a class="el" href="stream__dispatcher_8h_source.html">stream_dispatcher.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4a4a0c0c1831c4471214426e778a3975"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* applFirmwareInformation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get firmware information (zero-terminated) string </p>
<p>function which can be implemented by the application to return the firmware inforamtion string (zero-terminated). E.g. information about the chip and board. </p>
<dl class="section return"><dt>Returns</dt><dd>the a pointer to the firmware information </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00412">412</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab1ebe0715d47303b0285e58b4f6848b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applPeripheralReset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reset peripherals of board </p>
<p>function which can be implemented by the application to reset the board peripherals. </p>
<dl class="section return"><dt>Returns</dt><dd>AMS_STREAM_UNHANDLED_PROTOCOL if function was not overloaded by application </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00394">394</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a643fb80b755c5bad7a12aeea04ad0861"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applProcessCmd </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command dispatcher for application-specific commands. </p>
<p>function which can be implemented by the application process application- specific commands for I/O. If data should be returned, the txData buffer can be filled with data which should be sent to the PC. In argument txSize, the size is returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol</td><td>: the protocol byte which needs to be processed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00400">400</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf04107999e6e405925ceddfbb4a6edf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applProcessCyclic </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>remainingSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called cyclic (even when no full usb packet was received). Use this is you need to send several packets (time delayed) in response to one usb request. </p>
<p>function which can be implemented by the application process If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">protocol</td><td>: protocol byte to be used for the packet header </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remainingSize</td><td>: how many bytes are free in the buffer txData </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00407">407</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c9c1398d4b415a6ae75399f8bfd247"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applReadReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function to read one or more registers. </p>
<p>Function which can be implemented by the application to read registers. If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00484">484</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca11ee1372a8dfefb8c2f93a35062be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applWriteReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function to write one or more registers. </p>
<p>Function which can be implemented by the application to write registers. If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00513">513</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a0fe4497f92844f50bd567b8b5ca52755"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const u32 firmwareNumber</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FW version which will be reported to host </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00083">83</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 7 2015 14:12:44 for as3993 Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
