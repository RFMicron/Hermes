<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>as3993 Firmware: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">as3993 Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3b1dcce1203a4246271d0209b54aa6ca.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="as3993__config_8h_source.html">as3993_config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="platform_8h_source.html">platform.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="stream__dispatcher_8h_source.html">stream_dispatcher.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="usb__hid__stream__driver_8h_source.html">usb_hid_stream_driver.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="logger_8h_source.html">logger.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="uart__driver_8h_source.html">uart_driver.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="errno_8h_source.html">errno.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="as3993__public_8h_source.html">as3993_public.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="as3993_8h_source.html">as3993.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="gen2_8h_source.html">gen2.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="global_8h_source.html">global.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="appl__commands_8h_source.html">appl_commands.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="tuner_8h_source.html">tuner.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="iso6b_8h_source.html">iso6b.h</a>&quot;</code><br/>
</div>
<p><a href="main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab11a117f1e08391f23d1da05930e7acf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ab11a117f1e08391f23d1da05930e7acf">systemInit</a> (void)</td></tr>
<tr class="separator:ab11a117f1e08391f23d1da05930e7acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca592a0a2ceba84d7ccab8a0fbe0ef8c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aca592a0a2ceba84d7ccab8a0fbe0ef8c">morse_nibble</a> (u8 nibble)</td></tr>
<tr class="separator:aca592a0a2ceba84d7ccab8a0fbe0ef8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece5c254c281e7f7616922fc5982edf4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aece5c254c281e7f7616922fc5982edf4">showError</a> (u8 errorCode, u8 blinkState)</td></tr>
<tr class="separator:aece5c254c281e7f7616922fc5982edf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a916a41b2b38f7d2c32b13809c3f924d6"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a916a41b2b38f7d2c32b13809c3f924d6">applPeripheralReset</a> (void)</td></tr>
<tr class="separator:a916a41b2b38f7d2c32b13809c3f924d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643fb80b755c5bad7a12aeea04ad0861"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a643fb80b755c5bad7a12aeea04ad0861">applProcessCmd</a> (u8 protocol, u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:a643fb80b755c5bad7a12aeea04ad0861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf04107999e6e405925ceddfbb4a6edf"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#abf04107999e6e405925ceddfbb4a6edf">applProcessCyclic</a> (u8 *protocol, u16 *txSize, u8 *txData, u16 remainingSize)</td></tr>
<tr class="separator:abf04107999e6e405925ceddfbb4a6edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4a0c0c1831c4471214426e778a3975"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a4a4a0c0c1831c4471214426e778a3975">applFirmwareInformation</a> ()</td></tr>
<tr class="separator:a4a4a0c0c1831c4471214426e778a3975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0be25d0275b093b1450d304950ccf18d"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0be25d0275b093b1450d304950ccf18d">cmdReadReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:a0be25d0275b093b1450d304950ccf18d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c9c1398d4b415a6ae75399f8bfd247"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ad4c9c1398d4b415a6ae75399f8bfd247">applReadReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:ad4c9c1398d4b415a6ae75399f8bfd247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0825be6c08f30d8cd68786f335ce98ef"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0825be6c08f30d8cd68786f335ce98ef">cmdWriteReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:a0825be6c08f30d8cd68786f335ce98ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca11ee1372a8dfefb8c2f93a35062be6"><td class="memItemLeft" align="right" valign="top">u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aca11ee1372a8dfefb8c2f93a35062be6">applWriteReg</a> (u16 rxSize, const u8 *rxData, u16 *txSize, u8 *txData)</td></tr>
<tr class="separator:aca11ee1372a8dfefb8c2f93a35062be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abec33c07c652a4e45b817add02ea2bd3"><td class="memItemLeft" align="right" valign="top">Freq&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#abec33c07c652a4e45b817add02ea2bd3">Frequencies</a></td></tr>
<tr class="separator:abec33c07c652a4e45b817add02ea2bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40526df6061b70feeef6f034db364b6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="as3993__public_8h.html#a24e956eab72b3e331706283669924255">Tag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a40526df6061b70feeef6f034db364b6e">tags_</a> [<a class="el" href="global_8h.html#adf4e7d5cd456c172af91b499031d5649">MAXTAG</a>]</td></tr>
<tr class="separator:a40526df6061b70feeef6f034db364b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d365da72b911be5016b19be1577d4a3"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3d365da72b911be5016b19be1577d4a3">gAS3993FwInfo</a> [] = FIRMWARE_ID&quot;||&quot;HARDWARE_ID</td></tr>
<tr class="separator:a3d365da72b911be5016b19be1577d4a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e7afe72b32baa414538af39820ab2d"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a77e7afe72b32baa414538af39820ab2d">gLogStartup</a> [] = FIRMWARE_ID&quot; %hhx.%hhx.%hhx on &quot;HARDWARE_ID&quot;\n&quot;</td></tr>
<tr class="separator:a77e7afe72b32baa414538af39820ab2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fe4497f92844f50bd567b8b5ca52755"><td class="memItemLeft" align="right" valign="top">const u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a0fe4497f92844f50bd567b8b5ca52755">firmwareNumber</a> = FIRMWARE_VERSION</td></tr>
<tr class="separator:a0fe4497f92844f50bd567b8b5ca52755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a472bccea2d214e63a0ba326a9277bc7b"><td class="memItemLeft" align="right" valign="top">static const u8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a472bccea2d214e63a0ba326a9277bc7b">codes</a> [0x10]</td></tr>
<tr class="separator:a472bccea2d214e63a0ba326a9277bc7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System initialization and main loop. </p>
<dl class="section author"><dt>Author</dt><dd>Ulrich Herrmann </dd>
<dd>
Bernhard Breinbauer </dd></dl>

<p>Definition in file <a class="el" href="main_8c_source.html">main.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4a4a0c0c1831c4471214426e778a3975"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* applFirmwareInformation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get firmware information (zero-terminated) string </p>
<p>function which can be implemented by the application to return the firmware inforamtion string (zero-terminated). E.g. information about the chip and board. </p>
<dl class="section return"><dt>Returns</dt><dd>the a pointer to the firmware information </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00412">412</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a916a41b2b38f7d2c32b13809c3f924d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applPeripheralReset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>reset peripherals of board </p>
<p>function which can be implemented by the application to reset the board peripherals. </p>
<dl class="section return"><dt>Returns</dt><dd>AMS_STREAM_UNHANDLED_PROTOCOL if function was not overloaded by application </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00394">394</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a643fb80b755c5bad7a12aeea04ad0861"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applProcessCmd </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command dispatcher for application-specific commands. </p>
<p>function which can be implemented by the application process application- specific commands for I/O. If data should be returned, the txData buffer can be filled with data which should be sent to the PC. In argument txSize, the size is returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol</td><td>: the protocol byte which needs to be processed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00400">400</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf04107999e6e405925ceddfbb4a6edf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applProcessCyclic </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>remainingSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called cyclic (even when no full usb packet was received). Use this is you need to send several packets (time delayed) in response to one usb request. </p>
<p>function which can be implemented by the application process If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">protocol</td><td>: protocol byte to be used for the packet header </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remainingSize</td><td>: how many bytes are free in the buffer txData </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00407">407</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c9c1398d4b415a6ae75399f8bfd247"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applReadReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function to read one or more registers. </p>
<p>Function which can be implemented by the application to read registers. If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00484">484</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca11ee1372a8dfefb8c2f93a35062be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 applWriteReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic function to write one or more registers. </p>
<p>Function which can be implemented by the application to write registers. If data should be returned, the txData buffer must be filled with the data to be sent to the PC. In argument txSize, the size is returned. The function also must fill in the protocol byte (this is the protocol value that is filled in in the protocol header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rxData</td><td>: pointer to payload for appl commands (in stream protocol buffer). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rxSize</td><td>: size of rxData </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txData</td><td>: pointer to buffer to store returned data (payload only) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">txSize</td><td>: size of returned data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status byte to be interpreted by the stream layer on the host </dd></dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00513">513</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0be25d0275b093b1450d304950ccf18d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 cmdReadReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function reads one or all registers from the AS3993. See also <a class="el" href="main_8c.html#ad4c9c1398d4b415a6ae75399f8bfd247" title="Generic function to read one or more registers. ">applReadReg()</a>.<br/>
The format of the report from the host is as follows: </p>
<table class="doxtable">
<tr>
<th>Byte</th><th>0</th><th>1 </th></tr>
<tr>
<th>Content</th><td>mode </td><td>reg_addr </td></tr>
</table>
<p>Where mode = 0 requests to read all registers and mode = 1 requests to read only the register with address reg_addr. If mode = 0 reg_addr is ignored. <br/>
If mode = 0 the device sends back: </p>
<table class="doxtable">
<tr>
<th>Byte </th><th>0 </th><th>.. </th><th>29 </th><th>30 </th><th>31 </th><th>.. </th><th>36 </th><th>37 </th><th>38 </th><th>48  </th></tr>
<tr>
<th>Content </th><td>reg 0x00 </td><td>.. </td><td>reg 0x1D </td><td>reg 0x22 </td><td>reg 0x29 </td><td>.. </td><td>reg 0x2E </td><td>reg 0x33 </td><td>reg 0x35 </td><td>.. </td><td>reg 0x3F  </td></tr>
</table>
<p>If mode = 1 the device sends back: </p>
<table class="doxtable">
<tr>
<th>Byte</th><th>0 </th></tr>
<tr>
<th>Content</th><td>reg value </td></tr>
</table>
<p>returns ERR_NONE if operation was successful, ERR_PARAM is invalid mode was set. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00464">464</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0825be6c08f30d8cd68786f335ce98ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u8 cmdWriteReg </td>
          <td>(</td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>rxSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u8 *&#160;</td>
          <td class="paramname"><em>rxData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16 *&#160;</td>
          <td class="paramname"><em>txSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>txData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function writes one register on the AS3993. See also <a class="el" href="main_8c.html#aca11ee1372a8dfefb8c2f93a35062be6" title="Generic function to write one or more registers. ">applWriteReg()</a>. <br/>
The format of the report from the host is as follows: </p>
<table class="doxtable">
<tr>
<th>Byte</th><th>0</th><th>1 </th></tr>
<tr>
<th>Content</th><td>reg_addr</td><td>value </td></tr>
</table>
<p>if reg_addr &gt; 0x80, then an immediate command is executed.<br/>
The device sends back: </p>
<table class="doxtable">
<tr>
<th>Byte</th><th>0 </th></tr>
<tr>
<th>Content</th><td>0 </td></tr>
</table>
<p>returns ERR_NONE if operation was successful. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00504">504</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main function Initializes board, cpu, reader, host communication, ...<br/>
After intialization a loop which waits for commands from host and performs cyclic inventory rounds is entered. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00276">276</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="aca592a0a2ceba84d7ccab8a0fbe0ef8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void morse_nibble </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>nibble</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function will morse an error code on either the <a class="el" href="platform_8h.html#a5c05fe457b8466f483f51d80fa96cad0">MCULED()</a> or on LED1() </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00133">133</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="aece5c254c281e7f7616922fc5982edf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void showError </td>
          <td>(</td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>errorCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>blinkState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function displays error codes. If the number of LEDs available on the board is sufficient, those LEDs will be used to show the error code binary coded. If there are too few LEDs on the board the error code will be morsed via <a class="el" href="main_8c.html#aca592a0a2ceba84d7ccab8a0fbe0ef8c">morse_nibble()</a>; </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorCode</td><td>The error code to display. </td></tr>
    <tr><td class="paramname">blinkState</td><td>Indicates if the LEDs should be turned on or off (for blinking). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="main_8c_source.html#l00176">176</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab11a117f1e08391f23d1da05930e7acf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systemInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Basic system initialization. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00386">386</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a472bccea2d214e63a0ba326a9277bc7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const u8 codes[0x10]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= </div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line">    0xbf, </div>
<div class="line">    0xaf, </div>
<div class="line">    0xa7, </div>
<div class="line">    0xa3, </div>
<div class="line">    0xa1, </div>
<div class="line">    0xa0, </div>
<div class="line">    0xb0, </div>
<div class="line">    0xb8, </div>
<div class="line">    0xbc, </div>
<div class="line">    0xbe, </div>
<div class="line">    0x41, </div>
<div class="line">    0x88, </div>
<div class="line">    0x8a, </div>
<div class="line">    0x64, </div>
<div class="line">    0x20, </div>
<div class="line">    0x82, </div>
<div class="line">}</div>
</div><!-- fragment --><p>morse codes for hex numbers. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00111">111</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0fe4497f92844f50bd567b8b5ca52755"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const u32 firmwareNumber = FIRMWARE_VERSION</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FW version which will be reported to host </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00083">83</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="abec33c07c652a4e45b817add02ea2bd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Freq Frequencies</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Contains the list of used frequencies. </p>

<p>Definition at line <a class="el" href="appl__commands_8c_source.html#l00160">160</a> of file <a class="el" href="appl__commands_8c_source.html">appl_commands.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3d365da72b911be5016b19be1577d4a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char gAS3993FwInfo[] = FIRMWARE_ID&quot;||&quot;HARDWARE_ID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FW information which will be reported to host. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00079">79</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a77e7afe72b32baa414538af39820ab2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char gLogStartup[] = FIRMWARE_ID&quot; %hhx.%hhx.%hhx on &quot;HARDWARE_ID&quot;\n&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>FW information which will be logged on startup. Version information is included in logger. </p>

<p>Definition at line <a class="el" href="main_8c_source.html#l00081">81</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
<a class="anchor" id="a40526df6061b70feeef6f034db364b6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="as3993__public_8h.html#a24e956eab72b3e331706283669924255">Tag</a> tags_[<a class="el" href="global_8h.html#adf4e7d5cd456c172af91b499031d5649">MAXTAG</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Array of Structures which stores all necessary Information about the Tags. </p>

<p>Definition at line <a class="el" href="appl__commands_8c_source.html#l00154">154</a> of file <a class="el" href="appl__commands_8c_source.html">appl_commands.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 7 2015 14:12:44 for as3993 Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
